-- MySQL Script generated by MySQL Workbench
-- mar 27 feb 2018 09:59:01 -04
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

/* SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0; */
/* SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0; */
/* SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES'; */

-- -----------------------------------------------------
-- Schema public
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema public
-- -----------------------------------------------------
--CREATE SCHEMA public --DEFAULT CHARACTER SET latin1 COLLATE latin1_spanish_ci ;
--USE public ;

-- -----------------------------------------------------
-- Table `public`.`caja`
-- -----------------------------------------------------
--DROP TABLE IF EXISTS public.caja ;

CREATE TABLE IF NOT EXISTS public.caja (
  id_caja INT NOT NULL,
  descripcion_caja VARCHAR(45) NOT NULL,
  activo_caja SMALLINT NOT NULL,
  PRIMARY KEY (id_caja))
;


-- -----------------------------------------------------
-- Table `public`.`cargo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.cargo ;

CREATE TABLE IF NOT EXISTS public.cargo (
  id_cargo INT NOT NULL,
  nombre_cargo VARCHAR(45) NOT NULL,
  activo_cargo VARCHAR(45) NOT NULL,
  PRIMARY KEY (id_cargo))
;


-- -----------------------------------------------------
-- Table `public`.`persona`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.persona ;

CREATE TABLE IF NOT EXISTS public.persona (
  id_persona INT NOT NULL,
  nombre_persona VARCHAR(45) NOT NULL,
  apellido_persona VARCHAR(45) NOT NULL,
  numero_identificacion_persona VARCHAR(45) NOT NULL,
  direccion_persona VARCHAR(45) NOT NULL,
  tipo_persona VARCHAR(1) NOT NULL,
  email_persona VARCHAR(45) NOT NULL,
  telefono_persona VARCHAR(45) NOT NULL,
  activo_persona SMALLINT NOT NULL,
  PRIMARY KEY (id_persona))
;


-- -----------------------------------------------------
-- Table `public`.`empleado`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.empleado ;

CREATE TABLE IF NOT EXISTS public.empleado (
  id_empleado INT NOT NULL,
  activo_empleado SMALLINT NOT NULL,
  cargo_id_cargo INT NOT NULL,
  persona_id_persona INT NOT NULL,
  PRIMARY KEY (id_empleado),
  CONSTRAINT fk_empleado_cargo1
    FOREIGN KEY (cargo_id_cargo)
    REFERENCES public.cargo (id_cargo)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_empleado_persona1
    FOREIGN KEY (persona_id_persona)
    REFERENCES public.persona (id_persona)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `public`.`estado_caja`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.estado_caja ;

CREATE TABLE IF NOT EXISTS public.estado_caja (
  id_estado_caja INT NOT NULL,
  fecha_apertura TIMESTAMP(0) NOT NULL,
  monto_apertura DECIMAL(10,0) NOT NULL,
  activo_estado_caja SMALLINT NOT NULL,
  empleado_id_empleado INT NOT NULL,
  caja_id_caja INT NOT NULL,
  PRIMARY KEY (id_estado_caja),
  CONSTRAINT fk_estado_caja_empleado1
    FOREIGN KEY (empleado_id_empleado)
    REFERENCES public.empleado (id_empleado)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_estado_caja_caja1
    FOREIGN KEY (caja_id_caja)
    REFERENCES public.caja (id_caja)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `public`.`corte_caja`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.corte_caja ;

CREATE TABLE IF NOT EXISTS public.corte_caja (
  id_corte_caja INT NOT NULL,
  fecha_corte TIMESTAMP(0) NOT NULL,
  monto_corte DECIMAL(10,0) NOT NULL,
  excedente_caja DECIMAL(10,0) NOT NULL,
  restante_caja DECIMAL(10,0) NOT NULL,
  activo_corte_caja SMALLINT NOT NULL,
  estado_caja_id_estado_caja INT NOT NULL,
  PRIMARY KEY (id_corte_caja),
  CONSTRAINT fk_corte_caja_estado_caja1
    FOREIGN KEY (estado_caja_id_estado_caja)
    REFERENCES public.estado_caja (id_estado_caja)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `public`.`desglose_caja`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.desglose_caja ;

CREATE TABLE IF NOT EXISTS public.desglose_caja (
  id_desglose_caja INT NOT NULL,
  monto_desglose_caja DECIMAL(10,0) NOT NULL,
  tipo_pago_desglose VARCHAR(45) NOT NULL,
  activo_desglose_caja SMALLINT NOT NULL,
  corte_caja_id_corte_caja INT NOT NULL,
  PRIMARY KEY (id_desglose_caja),
  CONSTRAINT fk_desglose_caja_corte_caja1
    FOREIGN KEY (corte_caja_id_corte_caja)
    REFERENCES public.corte_caja (id_corte_caja)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `public`.`venta`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.venta ;

CREATE TABLE IF NOT EXISTS public.venta (
  id_venta INT NOT NULL,
  total_previo_venta DECIMAL(10,0) NOT NULL,
  impuesto_venta DECIMAL(10,0) NOT NULL,
  total_exento DECIMAL(10,0) NOT NULL,
  abono_venta DECIMAL(10,0) NOT NULL,
  total_venta DECIMAL(10,0) NOT NULL,
  cambio_venta DECIMAL(10,0) NOT NULL,
  codigo_factura VARCHAR(45) NOT NULL,
  fecha_venta DATE NOT NULL,
  estado_venta VARCHAR(45) NOT NULL,
  activo_venta SMALLINT NOT NULL,
  persona_id_persona INT NOT NULL,
  PRIMARY KEY (id_venta),
  CONSTRAINT fk_venta_persona1
    FOREIGN KEY (persona_id_persona)
    REFERENCES public.persona (id_persona)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `public`.`tipo_pago`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.tipo_pago ;

CREATE TABLE IF NOT EXISTS public.tipo_pago (
  id_tipo_pago INT NOT NULL,
  descripcion_pago VARCHAR(45) NOT NULL,
  activo_tipo_pago SMALLINT NOT NULL,
  PRIMARY KEY (id_tipo_pago))
;


-- -----------------------------------------------------
-- Table `public`.`pago`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.pago ;

CREATE TABLE IF NOT EXISTS public.pago (
  id_pago INT NOT NULL,
  monto_pago DECIMAL(10,0) NOT NULL,
  fecha_pago TIMESTAMP(0) NOT NULL,
  activo_pago SMALLINT NOT NULL,
  tipo_pago_id_tipo_pago INT NOT NULL,
  venta_id_venta INT NOT NULL,
  PRIMARY KEY (id_pago),
  CONSTRAINT fk_pago_tipo_pago1
    FOREIGN KEY (tipo_pago_id_tipo_pago)
    REFERENCES public.tipo_pago (id_tipo_pago)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_pago_venta1
    FOREIGN KEY (venta_id_venta)
    REFERENCES public.venta (id_venta)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `public`.`producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.producto ;

CREATE TABLE IF NOT EXISTS public.producto (
  id_producto INT NOT NULL,
  nombre_producto VARCHAR(45) NOT NULL,
  descripcion_producto VARCHAR(45) NOT NULL,
  codigo_venta_producto VARCHAR(45) NOT NULL,
  limite_venta_persona DECIMAL(10,0) NOT NULL,
  margen_ganancia DECIMAL(10,0) NOT NULL,
  impuesto_producto DECIMAL(10,0) NOT NULL,
  precio_venta_publico VARCHAR(45) NOT NULL,
  periodo_venta_persona DECIMAL(10,0) NOT NULL,
  descripcion_empaque VARCHAR(45) NOT NULL,
  base_imponible DECIMAL(10,0) NOT NULL,
  cantidad_disponible DECIMAL(10,0) NOT NULL,
  balanza SMALLINT NOT NULL,
  producto_pre_fabricado SMALLINT NOT NULL,
  activo_producto SMALLINT NOT NULL,
  PRIMARY KEY (id_producto))
;


-- -----------------------------------------------------
-- Table `public`.`venta_producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.venta_producto ;

CREATE TABLE IF NOT EXISTS public.venta_producto (
  id_venta_producto INT NOT NULL,
  cantidad_producto VARCHAR(45) NOT NULL,
  activo_producto SMALLINT NOT NULL,
  venta_id_venta INT NOT NULL,
  producto_id_producto INT NOT NULL,
  PRIMARY KEY (id_venta_producto),
  CONSTRAINT fk_venta_producto_venta1
    FOREIGN KEY (venta_id_venta)
    REFERENCES public.venta (id_venta)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_venta_producto_producto1
    FOREIGN KEY (producto_id_producto)
    REFERENCES public.producto (id_producto)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `public`.`compra`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.compra ;

CREATE TABLE IF NOT EXISTS public.compra (
  id_compra INT NOT NULL,
  proveedor_compra VARCHAR(45) NOT NULL,
  cantidad_compra DECIMAL(10,0) NOT NULL,
  fecha_compra DATE NOT NULL,
  costo_unidad_compra DECIMAL(10,0) NOT NULL,
  orden_compra VARCHAR(45) NOT NULL,
  activo_compra SMALLINT NOT NULL,
  producto_id_producto INT NOT NULL,
  PRIMARY KEY (id_compra),
  CONSTRAINT fk_compra_producto1
    FOREIGN KEY (producto_id_producto)
    REFERENCES public.producto (id_producto)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `public`.`produccion`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.produccion ;

CREATE TABLE IF NOT EXISTS public.produccion (
  id_produccion INT NOT NULL,
  cantidad_produccion DECIMAL(10,0) NOT NULL,
  fecha_produccion DATE NOT NULL,
  activo_produccion SMALLINT NOT NULL,
  producto_id_producto INT NOT NULL,
  PRIMARY KEY (id_produccion),
  CONSTRAINT fk_produccion_producto1
    FOREIGN KEY (producto_id_producto)
    REFERENCES public.producto (id_producto)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `public`.`ajuste`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.ajuste ;

CREATE TABLE IF NOT EXISTS public.ajuste (
  id_ajuste INT NOT NULL,
  fecha_ajuste DATE NOT NULL,
  cantidad_ajuste DECIMAL(10,0) NOT NULL,
  descripcion_ajuste VARCHAR(100) NOT NULL,
  activo_ajuste SMALLINT NOT NULL,
  producto_id_producto INT NOT NULL,
  PRIMARY KEY (id_ajuste),
  CONSTRAINT fk_ajuste_producto1
    FOREIGN KEY (producto_id_producto)
    REFERENCES public.producto (id_producto)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `public`.`cierre_caja`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.cierre_caja ;

CREATE TABLE IF NOT EXISTS public.cierre_caja (
  id_cierre_caja INT NOT NULL,
  activo_cierre_caja SMALLINT NOT NULL,
  corte_caja_id_corte_caja INT NOT NULL,
  PRIMARY KEY (id_cierre_caja),
  CONSTRAINT fk_cierre_caja_corte_caja1
    FOREIGN KEY (corte_caja_id_corte_caja)
    REFERENCES public.corte_caja (id_corte_caja)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


-- -----------------------------------------------------
-- Table `public`.`producto_has_producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS public.producto_has_producto ;

CREATE TABLE IF NOT EXISTS public.producto_has_producto (
  producto_id_producto INT NOT NULL,
  producto_id_producto1 INT NOT NULL,
  cantidad_compuesto DECIMAL(10,0) NOT NULL,
  PRIMARY KEY (producto_id_producto, producto_id_producto1),
  CONSTRAINT fk_producto_has_producto_producto1
    FOREIGN KEY (producto_id_producto)
    REFERENCES public.producto (id_producto)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_producto_has_producto_producto2
    FOREIGN KEY (producto_id_producto1)
    REFERENCES public.producto (id_producto)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


/* SET SQL_MODE=@OLD_SQL_MODE; */
/* SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS; */
/* SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; */